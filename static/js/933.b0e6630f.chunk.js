"use strict";(self.webpackChunkrest_countries_challenge=self.webpackChunkrest_countries_challenge||[]).push([[933],{9963:function(e,r,n){n.d(r,{Ds:function(){return c},v9:function(){return l}});var t=n(8214),o=n(5861),a=n(4569),s="https://restcountries.com/v2",i=n.n(a)().create({baseURL:s}),l=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.get("".concat(s,"/all")).then((function(e){return e.data})).catch((function(){throw new Error("Sorry, we cannot fetch countries at this moment. Please try again later.")})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(r,n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.get("".concat(s,"/alpha/").concat(r),{params:n}).then((function(e){return e.data})).catch((function(e){if(e.isAxiosError&&404===e.status)throw new Error("Sorry, there is no country with name: ".concat(r));throw new Error("Sorry, we failed to respond to your request. Please try again later")})));case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()},5933:function(e,r,n){n.r(r),n.d(r,{default:function(){return S}});var t=n(8214),o=n(8683),a=n(5861),s=n(8152),i=n(2791),l=n(9963),c=n(4061),u=n(2007),d=n.n(u);function f(){return f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},f.apply(this,arguments)}function h(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=(0,i.forwardRef)((function(e,r){var n=e.color,t=void 0===n?"currentColor":n,o=e.size,a=void 0===o?24:o,s=h(e,["color","size"]);return i.createElement("svg",f({ref:r,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),i.createElement("polyline",{points:"6 9 12 15 18 9"}))}));m.propTypes={color:d().string,size:d().oneOfType([d().string,d().number])},m.displayName="ChevronDown";var p=m,x=n(184),v=function(e){var r=e.name,n=e.placeholder,t=e.onChange,o=e.options,a=e.value;return(0,x.jsxs)("label",{htmlFor:r,className:"relative flex items-center text-gray-500 dark:text-gray-200 rounded-md shadow-md h-14",children:[(0,x.jsx)(p,{className:"absolute my-auto right-0 mx-4"}),(0,x.jsxs)("select",{id:r,onChange:t,name:r,value:a,className:"w-full h-full dark:bg-common-blue px-8 bg-white rounded-md font-semibold focus:outline-none focus:ring-inset focus:ring-dark-hover focus:ring-1",children:[(0,x.jsx)("option",{disabled:!0,hidden:!0,className:"font-semibold",value:"",children:n}),o.map((function(e){return(0,x.jsx)("option",{className:"font-semibold",children:e},e)}))]})]})};function g(){return g=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},g.apply(this,arguments)}function y(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=(0,i.forwardRef)((function(e,r){var n=e.color,t=void 0===n?"currentColor":n,o=e.size,a=void 0===o?24:o,s=y(e,["color","size"]);return i.createElement("svg",g({ref:r,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),i.createElement("circle",{cx:"11",cy:"11",r:"8"}),i.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));w.propTypes={color:d().string,size:d().oneOfType([d().string,d().number])},w.displayName="Search";var b=w,j=function(e){var r=e.placeholder,n=e.value,t=e.onChange,o=(0,i.useState)(n||""),a=(0,s.Z)(o,2),l=a[0],c=a[1];return(0,i.useEffect)((function(){var e=setTimeout((function(){t(l)}),300);return function(){clearTimeout(e)}}),[l,t]),(0,x.jsxs)("div",{className:"relative flex items-center text-gray-500 dark:text-gray-200 h-14",children:[(0,x.jsx)(b,{className:"absolute my-auto mx-4"}),(0,x.jsx)("input",{className:"placeholder-gray-500 text-very-dark-blue dark:bg-common-blue dark:placeholder-gray-300 dark:text-white text-base rounded-md shadow-md w-full h-full font-semibold input-light input-dark pl-16 focus:outline-none focus:ring-inset focus:ring-dark-hover focus:ring-1",type:"text","aria-label":"Search",onChange:function(e){return c(e.target.value)},value:l,placeholder:r})]})},k=n(6871),N=n(2975),O=function(e){var r=e.country,n=(0,k.s0)(),t=function(){return n("/".concat(r.alpha3Code))};return(0,x.jsxs)("div",{className:"flex transform focus:scale-105 focus:shadow-2xl hover:scale-105 hover:shadow-2xl flex-col dark:bg-common-blue rounded-md shadow-lg dark:text-white text-very-dark-blue cursor-pointer transition-transform duration-500 ease-in-out",role:"button",tabIndex:0,onClick:t,onKeyDown:function(e){return"Enter"===e.key&&t()},"data-testid":"country-card",children:[(0,x.jsx)(N.Z,{src:r.flag,alt:"Flag of ".concat(r.name),className:"object-cover w-full h-52 rounded-t-md "}),(0,x.jsxs)("div",{className:"py-8 px-6",children:[(0,x.jsx)("h6",{className:"font-bold text-lg mb-4",children:r.name}),(0,x.jsxs)("ul",{children:[(0,x.jsxs)("li",{className:"mb-2",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Population: "})," ",r.population.toLocaleString()]}),(0,x.jsxs)("li",{className:"mb-2",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Region: "})," ",r.region]}),(0,x.jsxs)("li",{className:"mb-2",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Capital: "})," ",r.capital]})]})]})]})},C=function(){return(0,x.jsx)("div",{className:"flex text-very-dark-blue dark:text-white",children:(0,x.jsx)("span",{className:"font-semibold",children:"No country match your query."})})},E=function(e){var r=e.countries;return 0===r.length?(0,x.jsx)(C,{}):(0,x.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-16 mt-6 px-2",style:{overflowX:"clip"},children:r.map((function(e){return(0,x.jsx)(O,{country:e},e.name)}))})},Z=["Africa","Americas","Asia","Europe","Oceania"];var S=function(){var e=(0,i.useState)({countries:[],displayed:0,status:"pending",error:""}),r=(0,s.Z)(e,2),n=r[0],u=r[1],d=(0,i.useState)(""),f=(0,s.Z)(d,2),h=f[0],m=f[1],p=(0,i.useState)(""),g=(0,s.Z)(p,2),y=g[0],w=g[1],b=n.countries,k=n.status,N=n.error,O=n.displayed,C=y||h?function(e,r,n){return r||n?e.filter((function(e){return r&&e.region===r?!n||e.name.toLowerCase().includes(n.toLowerCase()):!(!n||r)&&e.name.toLowerCase().includes(n.toLowerCase())})):e}(b,y,h):b.slice(0,O),S=(0,i.useCallback)((function(e){return m(e)}),[]);(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.v9)().then((function(e){return u({countries:e,status:"resolved",error:"",displayed:8})})).catch((function(e){return u((function(r){return(0,o.Z)((0,o.Z)({},r),{},{status:"error",error:e.message})}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=function(){window.innerHeight+window.scrollY+200>=document.body.offsetHeight&&O<b.length&&u((function(e){return(0,o.Z)((0,o.Z)({},e),{},{displayed:e.displayed+8})}))};return(0,i.useEffect)((function(){return window.addEventListener("scroll",L),function(){window.removeEventListener("scroll",L)}})),(0,x.jsxs)("div",{className:"flex flex-col",children:[(0,x.jsx)("div",{className:"flex z-50 flex-col h-52 sm:h-36 fixed justify-center  w-full left-0 bg-light-gray dark:bg-dark-blue items-center",children:(0,x.jsxs)("div",{className:"flex justify-between flex-wrap w-10/12 max-w-screen-2xl",children:[(0,x.jsx)("div",{className:"w-full sm:w-1/3 ",style:{minWidth:"320px"},children:(0,x.jsx)(j,{placeholder:"Search for a country...",value:h,onChange:S})}),(0,x.jsx)("div",{className:"w-6/12 sm:w-2/12 mt-10 sm:mt-0",style:{minWidth:"200px"},children:(0,x.jsx)(v,{name:"query-by-name",options:Z,placeholder:"Filter by Region",value:y,onChange:function(e){return w(e.target.value)}})})]})}),(0,x.jsx)("div",{className:"mt-52 sm:mt-36",children:"resolved"!==k?(0,x.jsxs)("div",{children:[N&&(0,x.jsx)("div",{role:"alert",children:N}),"pending"===k&&(0,x.jsx)(c.a,{message:"Finding countries..."})]}):(0,x.jsx)(E,{countries:C})})]})}}}]);
//# sourceMappingURL=933.b0e6630f.chunk.js.map